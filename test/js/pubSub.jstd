travi.test.testCase('PubSubTests', (function () {
    'use strict';

    return {
        common: travi.test.common,
        events: travi.events,

        eventName: 'some-event',
        callback: function () {
        },
        data: {},

        tearDown: function () {
            this.common.restore([
                amplify.publish,
                amplify.subscribe,
                amplify.unsubscribe
            ]);
        },

        'test publish mapped to amplify': function () {
            sinon.spy(amplify, 'publish');

            this.events.publish(this.eventName, this.data);

            sinon.assert.calledOnce(amplify.publish);
            sinon.assert.calledWith(amplify.publish, this.eventName, this.data);
        },

        'test subscribe mapped to amplify': function () {
            sinon.spy(amplify, 'subscribe');

            this.events.subscribe(this.eventName, this.callback);

            sinon.assert.calledOnce(amplify.subscribe);
            sinon.assert.calledWith(amplify.subscribe, this.eventName, this.callback);
        },

        'test unsubscribe mapped to amplify': function () {
            sinon.spy(amplify, 'unsubscribe');

            this.events.unsubscribe(this.eventName, this.callback);

            sinon.assert.calledOnce(amplify.unsubscribe);
            sinon.assert.calledWith(amplify.unsubscribe, this.eventName, this.callback);
        }
    };
}()));