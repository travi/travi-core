{"version":3,"file":"travi-core.min.js","sources":["../js/travi.js","../js/travi/templates.js","../js/travi/browserProxy.js","../js/travi/cookies.js","../js/travi/dependencies/checker.js","../js/travi/dependencies/loader.js","../js/travi/enhancements/choices.js","../js/travi/enhancements/constants.js","../js/travi/enhancements/detection.js","../js/travi/enhancements/persist.js","../js/travi/events.js","../js/travi/utilities.js"],"names":["global","putIn","object","namespace","provided","i","levels","split","levelCount","length","undefined","getFrom","parts","part","subObject","shift","getStyleSheet","sheetUrl","link","document","createElement","setAttribute","getElementsByTagName","appendChild","ns","this","register","dependencies","call","travi","checker","check","constants","set","key","value","ownProp","constantList","get","Object","prototype","hasOwnProperty","putInObject","getFromObject","enableConstants","loadTemplate","templateName","templateUrl","promise","$","ajax","url","type","dataType","success","template","templates","loadedTemplates","getTemplate","TEMPLATE_DIRECTORY","TEMPLATE_EXT","preLoadTemplates","pathToSingleTemplate","promises","push","when","apply","render","data","renderTemplate","callback","done","init","views","helpers","toLower","string","toLowerCase","preLoad","refresh","location","reload","getNameAndValueFromPair","pair","nameAndValue","name","getNameFromPair","getValueFromCookie","trimLeadingSpaces","charAt","substring","getCookie","qty","currentPair","cookies","cookie","getCookies","exists","getDateNowAdjustedByDays","days","date","Date","setTime","getTime","valueOf","buildExpiresRelativeToNow","toGMTString","create","expires","remove","clearAll","getDeferred","moduleStatuses","getModule","initAndResolve","module","dependency","references","resolve","determineLoadedState","deferred","Deferred","getLoadedStateFor","getPromiseListForDependencies","ensureDependenciesAreLoaded","checkIfLoaded","then","moduleAlreadyDefined","currentLevel","e","load","pathToModule","replace","loaded","js","getScript","PATH_TO_MODULES","resetVersion","ENHANCEMENT_VERSION_KEY","browserProxy","configureVersionToggle","choice","sizeVersion","click","persist","update","configureLargeVersionToggle","LARGE_SCREEN_CHOICE","LARGE_COOKIE_VALUE","configureSmallVersionToggle","SMALL_SCREEN_CHOICE","SMALL_COOKIE_VALUE","configureVersionToggles","addVersionTogglesToDom","alternateEnhancement","alternateEnhancementText","alternateCommonName","renderedTemplate","append","addLinksToChooseVersion","currentEnhancement","enhancements","getConstants","DAYS_BEFORE_ENHANCEMENT_COOKIE_EXPIRATION","BASIC_CHOICE","isSmallScreen","Modernizr","mq","determineSvgSupport","svg","detectEnhancementVersion","setInitialEnhancementVersion","setEnhancementVersionTo","versionKey","publish","eventName","amplify","subscribe","unsubscribe","o","F","Array","from","to","rest","slice","extend","objectToExtend","additionalMembers","createObjectFrom","extendObject"],"mappings":"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"}