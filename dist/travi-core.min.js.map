{"version":3,"file":"travi-core.min.js","sources":["../js/travi.js","../js/travi/register.js","../js/travi/templates.js","../js/travi/browserProxy.js","../js/travi/cookies.js","../js/travi/enhancements/constants.js","../js/travi/enhancements/persist.js","../js/travi/enhancements/detection.js","../js/travi/dependencies/checker.js","../js/travi/dependencies/loader.js","../js/travi/enhancements/choices.js","../js/travi/events.js","../js/travi/utilities.js"],"names":["global","putIn","object","namespace","provided","i","levels","split","levelCount","length","undefined","getFrom","parts","part","subObject","shift","getStyleSheet","sheetUrl","link","document","createElement","setAttribute","getElementsByTagName","appendChild","ns","this","register","call","constants","set","key","value","ownProp","constantList","get","Object","prototype","hasOwnProperty","travi","putInObject","getFromObject","enableConstants","dependencies","checker","check","loadTemplate","templateName","templateUrl","promise","$","ajax","url","type","dataType","success","template","templates","loadedTemplates","getTemplate","TEMPLATE_DIRECTORY","TEMPLATE_EXT","preLoadTemplates","pathToSingleTemplate","promises","push","when","apply","render","data","renderTemplate","callback","done","init","views","helpers","toLower","string","toLowerCase","preLoad","refresh","location","reload","getNameAndValueFromPair","pair","nameAndValue","name","getNameFromPair","getValueFromCookie","trimLeadingSpaces","charAt","substring","getCookie","qty","currentPair","cookies","cookie","getCookies","exists","getDateNowAdjustedByDays","days","date","Date","setTime","getTime","valueOf","buildExpiresRelativeToNow","toGMTString","create","expires","remove","clearAll","getConstants","ENHANCEMENT_VERSION_KEY","DAYS_BEFORE_ENHANCEMENT_COOKIE_EXPIRATION","SMALL_SCREEN_CHOICE","LARGE_SCREEN_CHOICE","BASIC_CHOICE","LARGE_COOKIE_VALUE","SMALL_COOKIE_VALUE","setEnhancementVersionTo","versionKey","browserProxy","enhancements","update","isSmallScreen","Modernizr","mq","determineSvgSupport","svg","detectEnhancementVersion","persist","setInitialEnhancementVersion","getDeferred","moduleStatuses","getModule","initAndResolve","module","dependency","references","resolve","determineLoadedState","deferred","Deferred","getLoadedStateFor","getPromiseListForDependencies","ensureDependenciesAreLoaded","checkIfLoaded","then","moduleAlreadyDefined","currentLevel","e","load","pathToModule","replace","loaded","js","getScript","PATH_TO_MODULES","resetVersion","configureVersionToggle","choice","sizeVersion","click","configureLargeVersionToggle","configureSmallVersionToggle","configureVersionToggles","addVersionTogglesToDom","alternateEnhancement","alternateEnhancementText","alternateCommonName","renderedTemplate","append","addLinksToChooseVersion","currentEnhancement","publish","eventName","amplify","subscribe","unsubscribe","o","F","Array","from","to","rest","slice","extend","objectToExtend","additionalMembers","createObjectFrom","extendObject"],"mappings":"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"}